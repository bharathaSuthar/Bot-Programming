#include <iostream>
#include <string>
#include <vector>
#include <algorithm>
#include <map>

using namespace std;

string WhichSideshouldIdraw(string b, string sides, map<string,string> boxes){
    string s,a1;
    string  top=a1+b[0]+((char)(b[1]+1)),
            bottom=a1+b[0]+(char)(b[1]-1),
            left=a1+((char)(b[0]-1))+b[1],
            right=a1+((char)(b[0]+1))+b[1];
    if(boxes[right].size()!=2 || boxes[right].size()!=0){
        cerr<<right<<" R"<<boxes[right].size()<<endl;
        if(sides.find("R")!=string::npos) s+="R";
    }
    if(boxes[left].size()!=2 && boxes[left].size()!=0){
        cerr<<left<<" L"<<boxes[left].size()<<endl;
        if(sides.find("L")!=string::npos) s+="L";
    }
    if(boxes[top].size()!=2 && boxes[top].size()!=0){
        cerr<<top<<" T"<<boxes[top].size()<<endl;
        if(sides.find("T")!=string::npos) s+="T";
    }
    if(boxes[bottom].size()!=2 && boxes[bottom].size()!=0){
        cerr<<bottom<<" B"<<boxes[bottom].size()<<endl;
        if(sides.find("B")!=string::npos) s+="B";
    }
    cerr<<"these are sides: "<<s<<endl;
    string res;
    if(s.size()==0) return "NONE";
    else return res+s[rand()%s.size()];
}

int main()
{
    int boardSize; // The size of the board.
    cin >> boardSize; cin.ignore();
    string playerId; // The ID of the player. 'A'=first player, 'B'=second player.
    cin >> playerId; cin.ignore();
    srand(time(0));
    // game loop
    while (1) {
        int playerScore; // The player's score.
        int opponentScore; // The opponent's score.
        cin >> playerScore >> opponentScore; cin.ignore();
        int numBoxes; // The number of playable boxes.
        map<string,string> B1,B2,B3,B4,allB; //boxes with number of sides to draw
        cin >> numBoxes; cin.ignore();
        for (int i = 0; i < numBoxes; i++) {
            string box; // The ID of the playable box.
            string sides; // Playable sides of the box.
            cin >> box >> sides; cin.ignore();
            allB[box]=sides;
            if(sides.size()==1) B1[box]=sides;
            else if(sides.size()==2) B2[box]=sides;
            else if(sides.size()==3) B3[box]=sides;
            else B4[box]=sides;
        }
        if(!B1.empty()){
            auto it=B1.begin();
            cout<<it->first<<" "<<it->second<<endl;
        }
        else{
            string Box;
            if(!B4.empty()){
                auto it=B4.begin();
                string s;
                for(;it!=B4.end(); it++){
                    s=WhichSideshouldIdraw(it->first,it->second,allB);
                    if(s!="NONE"){
                        cout<<it->first<<" "<<s<<endl;
                        break;
                    }
                }
            }
            else if(!B3.empty()){
                auto it=B3.begin();
                string s;
                for(;it!=B3.end(); it++){
                    s=WhichSideshouldIdraw(it->first,it->second,allB);
                    if(s!="NONE"){
                        cout<<it->first<<" "<<s<<endl;
                        break;
                    }
                }
            }
            else if(!B2.empty()){
                auto it=B2.begin();
                string s;
                for(;it!=B2.end(); it++){
                    s=WhichSideshouldIdraw(it->first,it->second,allB);
                    if(s!="NONE"){
                        cout<<it->first<<" "<<s<<endl;
                        break;
                    }
                }
            }
        }
    }
}
